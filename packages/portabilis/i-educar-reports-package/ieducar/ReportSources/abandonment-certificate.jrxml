<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="abandonment-certificate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ebfea547-cf8a-408f-af8a-1e9e8f07874e">
    <property name="ireport.zoom" value="1.6105100000000045"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="96"/>
    <parameter name="ano" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[new java.lang.Integer(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="instituicao" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[new java.lang.Integer(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="escola" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[new java.lang.Integer(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="matricula" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[new java.lang.Integer(0)]]></defaultValueExpression>
    </parameter>
    <parameter name="observacao" class="java.lang.String"/>
    <parameter name="logo" class="java.lang.String"/>
    <parameter name="source" class="java.lang.String"/>
    <parameter name="database" class="java.lang.String"/>
    <parameter name="data_emissao" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[0]]></defaultValueExpression>
    </parameter>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA[""]]></defaultValueExpression>
    </parameter>
    <parameter name="cabecalho_alternativo" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[0]]></defaultValueExpression>
    </parameter>
    <parameter name="emitir_nome_diretor" class="java.lang.Boolean">
        <defaultValueExpression><![CDATA[false]]></defaultValueExpression>
    </parameter>
    <parameter name="emitir_secretario_escolar" class="java.lang.Boolean">
        <defaultValueExpression><![CDATA[false]]></defaultValueExpression>
    </parameter>
    <parameter name="titulo" class="java.lang.String">
        <defaultValueExpression><![CDATA[""]]></defaultValueExpression>
    </parameter>
    <parameter name="assinatura_secretario" class="java.lang.String"/>
    <parameter name="assinatura_diretor" class="java.lang.String"/>
    <field name="nm_instituicao" class="java.lang.String"/>
    <field name="nm_responsavel" class="java.lang.String"/>
    <field name="altera_atestado_para_declaracao" class="java.lang.Boolean"/>
    <field name="cod_escola" class="java.lang.Integer"/>
    <field name="ano" class="java.lang.Integer"/>
    <field name="nm_curso" class="java.lang.String"/>
    <field name="nm_serie" class="java.lang.String"/>
    <field name="nm_turma" class="java.lang.String"/>
    <field name="periodo" class="java.lang.String"/>
    <field name="cod_aluno" class="java.lang.Integer"/>
    <field name="cod_matricula" class="java.lang.Integer"/>
    <field name="nome" class="java.lang.String"/>
    <field name="cidade" class="java.lang.String"/>
    <field name="data_atual" class="java.lang.String"/>
    <field name="data_nasc" class="java.lang.String"/>
    <field name="municipio_uf_nascimento" class="java.lang.String"/>
    <field name="nm_pai" class="java.lang.String"/>
    <field name="nm_mae" class="java.lang.String"/>
    <field name="nm_escola" class="java.lang.String"/>
    <field name="cod_inep" class="java.lang.Long"/>
    <field name="cod_nis" class="java.math.BigDecimal"/>
    <field name="aluno_estado_id" class="java.lang.String"/>
    <field name="frequencia" class="java.math.BigDecimal"/>
    <field name="diretor" class="java.lang.String"/>
    <field name="secretario" class="java.lang.String"/>
    <field name="data_abandono" class="java.lang.String"/>
    <field name="motivo_abandono" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="61" splitType="Stretch">
            <subreport>
                <reportElement x="0" y="0" width="555" height="60" uuid="ae2021e4-3b13-4bad-9587-1e1b0fd2c89a"/>
                <subreportParameter name="logo">
                    <subreportParameterExpression><![CDATA[$P{logo}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="titulo">
                    <subreportParameterExpression><![CDATA[""]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="cod_instituicao">
                    <subreportParameterExpression><![CDATA[$P{instituicao}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="cod_escola">
                    <subreportParameterExpression><![CDATA[$P{escola} == 0 ? $F{cod_escola} : $P{escola}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="ano">
                    <subreportParameterExpression><![CDATA[$P{ano}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="data_emissao">
                    <subreportParameterExpression><![CDATA[$P{data_emissao}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="database">
                    <subreportParameterExpression><![CDATA[$P{database}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportParameter name="source">
                    <subreportParameterExpression><![CDATA[$P{source}]]></subreportParameterExpression>
                </subreportParameter>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header-portrait.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </pageHeader>
    <detail>
        <band height="409" splitType="Stretch">
            <textField isStretchWithOverflow="true" pattern="">
                <reportElement uuid="09b1099f-fbaf-45f9-aaa9-9fa8f5d23f8d" stretchType="RelativeToBandHeight" x="21" y="50" width="513" height="105"/>
                <textElement textAlignment="Justified">
                    <font fontName="DejaVu Sans" size="11"/>
                    <paragraph lineSpacing="1_1_2" firstLineIndent="30"/>
                </textElement>
                <textFieldExpression><![CDATA[($F{altera_atestado_para_declaracao} ? "Declaramos" : "Atestamos")+ " para os devidos fins que, o(a) aluno(a) "+$F{nome}+", filho(a) de "+($F{nm_pai}.equals("") && $F{nm_mae}.equals("") ? "Não Informado" : (!$F{nm_pai}.equals("") && $F{nm_mae}.equals("") ? $F{nm_pai} : ($F{nm_pai}.equals("") && !$F{nm_mae}.equals("") ? $F{nm_mae} : ($F{nm_mae} + " e de " + $F{nm_pai}))))+", nascido(a) em "+$F{data_nasc}+", natural de "
+$F{municipio_uf_nascimento}+", frequentou o ano de "+$F{ano}+" no(a) "+$F{nm_serie}+" na turma "+$F{nm_turma}+" do curso "+$F{nm_curso}+" no período "
 + $F{periodo} + " e abandonou esta escola na data de " + $F{data_abandono} + " por motivo de " + $F{motivo_abandono}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="ba7cb218-2999-4bf4-9b20-ce90405335b9" positionType="Float" x="92" y="306" width="442" height="90"/>
                <textElement textAlignment="Justified">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{observacao}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="ab1f2689-54cc-433f-b62f-82b85d2a2d23" x="21" y="306" width="71" height="13">
                    <printWhenExpression><![CDATA[$P{observacao} != null]]></printWhenExpression>
                </reportElement>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <text><![CDATA[Observação:]]></text>
            </staticText>
            <textField isBlankWhenNull="true">
                <reportElement uuid="dd038e50-edde-4ca2-be56-c4ad0bec1a6b" x="157" y="256" width="158" height="20"/>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{cod_inep}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement uuid="8863c168-63e9-47e5-96c7-f872b9acfd7c" x="157" y="210" width="158" height="20"/>
                <textElement>
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{cod_aluno}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="450097ec-70cd-4d94-92bf-65da72263dff" x="21" y="256" width="132" height="20"/>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <text><![CDATA[Código nacional (INEP):]]></text>
            </staticText>
            <textField isBlankWhenNull="true">
                <reportElement uuid="dd038e50-edde-4ca2-be56-c4ad0bec1a6b" x="157" y="233" width="158" height="20"/>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{aluno_estado_id}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="7f59c721-2daf-469c-b28b-3e6293f68d78" x="21" y="210" width="132" height="20"/>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <text><![CDATA[Código município:]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="a7fef40f-5b83-4c6f-8ec4-55f8c8a68e23" x="21" y="279" width="132" height="20"/>
                <textElement>
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <text><![CDATA[Identificação social (NIS):]]></text>
            </staticText>
            <textField isBlankWhenNull="true">
                <reportElement uuid="49de14a9-1c89-4d8b-840c-bf7ad66b6276" x="157" y="279" width="100" height="20"/>
                <textElement>
                    <font fontName="DejaVu Sans"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{cod_nis}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="7" width="555" height="17" uuid="c68eb866-029b-4035-9655-8398f3d678e4"/>
                <textElement textAlignment="Center" verticalAlignment="Middle" markup="none">
                    <font fontName="DejaVu Sans" size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["ATESTADO DE ABANDONO"]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="7f59c721-2daf-469c-b28b-3e6293f68d78" x="20" y="233" width="132" height="20"/>
                <textElement markup="none">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <text><![CDATA[Código estado:]]></text>
            </staticText>
        </band>
    </detail>
    <pageFooter>
        <band height="163">
            <textField isBlankWhenNull="true">
                <reportElement uuid="90b88942-ea8c-4d08-a9e9-63d3f59a46b0" x="21" y="5" width="513" height="14"/>
                <textElement textAlignment="Right">
                    <font fontName="DejaVu Sans" size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{cidade}+", "+$F{data_atual}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="4c9c2119-06e0-4e13-96e3-82a8347b7399" x="342" y="102" width="193" height="38">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == true]]></printWhenExpression>
                </reportElement>
                <textElement textAlignment="Center">
                    <font fontName="DejaVu Sans"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{emitir_nome_diretor} ? ($F{diretor} == null ? $P{assinatura_diretor} : $F{diretor} + "\n" + $P{assinatura_diretor}) : ($P{assinatura_diretor})]]></textFieldExpression>
            </textField>
            <line>
                <reportElement uuid="0d179794-4148-414e-aa50-655ce102c43f" x="172" y="102" width="193" height="1">
                    <printWhenExpression><![CDATA[$P{emitir_nome_diretor} == true && $P{emitir_secretario_escolar} == false]]></printWhenExpression>
                </reportElement>
            </line>
            <textField>
                <reportElement uuid="acb35541-433f-46d1-942d-58b7e890aaa6" x="22" y="103" width="193" height="37">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == true]]></printWhenExpression>
                </reportElement>
                <textElement textAlignment="Center">
                    <font fontName="DejaVu Sans"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{emitir_secretario_escolar} ? ($F{secretario} == null ? $P{assinatura_secretario} : $F{secretario} + "\n" + $P{assinatura_secretario}) : ($P{assinatura_secretario})]]></textFieldExpression>
            </textField>
            <line>
                <reportElement uuid="0d179794-4148-414e-aa50-655ce102c43f" x="342" y="101" width="193" height="1">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == true]]></printWhenExpression>
                </reportElement>
            </line>
            <line>
                <reportElement uuid="0d179794-4148-414e-aa50-655ce102c43f" x="172" y="102" width="193" height="1">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == false]]></printWhenExpression>
                </reportElement>
            </line>
            <textField>
                <reportElement uuid="4c9c2119-06e0-4e13-96e3-82a8347b7399" x="172" y="103" width="193" height="38">
                    <printWhenExpression><![CDATA[$P{emitir_nome_diretor} == true && $P{emitir_secretario_escolar} == false]]></printWhenExpression>
                </reportElement>
                <textElement textAlignment="Center">
                    <font fontName="DejaVu Sans"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{emitir_nome_diretor} ? ($F{diretor} == null ? $P{assinatura_diretor} : $F{diretor} + "\n" + $P{assinatura_diretor}) : ($P{assinatura_diretor})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="acb35541-433f-46d1-942d-58b7e890aaa6" x="172" y="103" width="193" height="37">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == false]]></printWhenExpression>
                </reportElement>
                <textElement textAlignment="Center">
                    <font fontName="DejaVu Sans"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{emitir_secretario_escolar} ? ($F{secretario} == null ? $P{assinatura_secretario} : $F{secretario} + "\n" + $P{assinatura_secretario}) : ($P{assinatura_secretario})]]></textFieldExpression>
            </textField>
            <line>
                <reportElement uuid="0d179794-4148-414e-aa50-655ce102c43f" x="22" y="102" width="193" height="1">
                    <printWhenExpression><![CDATA[$P{emitir_secretario_escolar} == true && $P{emitir_nome_diretor} == true]]></printWhenExpression>
                </reportElement>
            </line>
        </band>
    </pageFooter>
</jasperReport>
